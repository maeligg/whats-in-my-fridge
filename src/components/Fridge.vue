<template>
  <div>
    <svg xmlns="http://www.w3.org/2000/svg" width="274" height="231" fill="none" viewBox="0 0 274 231" :class="this.editing ? 'looking' : ''">
      <g clip-path="url(#clip0)">
        <rect width="274" height="231" />
        <mask id="mask0" width="229" height="41" x="23" y="199" mask-type="alpha" maskUnits="userSpaceOnUse">
          <rect width="229" height="41" x="23" y="199" fill="#C4C4C4" />
        </mask>
        <g mask="url(#mask0)">
          <rect width="221" height="33" x="27" y="194.303" stroke="white" stroke-width="8" rx="6" />
        </g>
        <rect width="266" height="197" x="4" y="4" stroke="white" stroke-width="8" rx="6" />
        <g class="face">
          <g class="face-smiling">
            <path fill="white" fill-rule="evenodd" d="M122 106C122 114.284 128.716 121 137 121C145.284 121 152 114.284 152 106H122Z" clip-rule="evenodd" />
            <mask id="mask1" width="30" height="16" x="159" y="70" mask-type="alpha" maskUnits="userSpaceOnUse">
              <rect width="30" height="15" x="159" y="70.9999" fill="#C4C4C4" />
            </mask>
            <g mask="url(#mask1)">
              <mask id="path-6-inside-1" fill="white">
                <path fill-rule="evenodd" d="M174 70.9999C165.716 70.9999 159 77.7156 159 85.9999C159 87.3851 159.188 88.7265 159.539 89.9999L188.461 89.9999C188.812 88.7265 189 87.3851 189 85.9999C189 77.7156 182.284 70.9999 174 70.9999Z" clip-rule="evenodd" />
              </mask>
              <path fill="white" d="M159 85.9999L155 85.9999V85.9999H159ZM174 70.9999V74.9999V70.9999ZM159.539 89.9999L155.683 91.0642L156.494 93.9999H159.539V89.9999ZM188.461 89.9999V93.9999H191.506L192.317 91.0642L188.461 89.9999ZM163 85.9999C163 79.9248 167.925 74.9999 174 74.9999V66.9999C163.507 66.9999 155 75.5065 155 85.9999L163 85.9999ZM163.395 88.9357C163.138 88.0057 163 87.0222 163 85.9999H155C155 87.7481 155.237 89.4473 155.683 91.0642L163.395 88.9357ZM159.539 93.9999L188.461 93.9999V85.9999L159.539 85.9999V93.9999ZM185 85.9999C185 87.0221 184.862 88.0057 184.605 88.9357L192.317 91.0642C192.763 89.4473 193 87.7481 193 85.9999H185ZM174 74.9999C180.075 74.9999 185 79.9248 185 85.9999H193C193 75.5065 184.493 66.9999 174 66.9999V74.9999Z" mask="url(#path-6-inside-1)" />
            </g>
            <mask id="mask2" width="30" height="16" x="84" y="70" mask-type="alpha" maskUnits="userSpaceOnUse">
              <rect width="30" height="15" x="84" y="70.9999" fill="#C4C4C4" />
            </mask>
            <g mask="url(#mask2)">
              <mask id="path-9-inside-2" fill="white">
                <path fill-rule="evenodd" d="M99 70.9999C90.7157 70.9999 84 77.7156 84 85.9999C84 87.3851 84.1877 88.7265 84.5392 89.9999L113.461 89.9999C113.812 88.7265 114 87.3851 114 85.9999C114 77.7156 107.284 70.9999 99 70.9999Z" clip-rule="evenodd" />
              </mask>
              <path fill="white" d="M84 85.9999L80 85.9999V85.9999H84ZM84.5392 89.9999L80.6834 91.0642L81.4937 93.9999H84.5392L84.5392 89.9999ZM113.461 89.9999V93.9999H116.506L117.317 91.0642L113.461 89.9999ZM88 85.9999C88 79.9248 92.9248 74.9999 99 74.9999V66.9999C88.5066 66.9999 80 75.5065 80 85.9999L88 85.9999ZM88.3951 88.9357C88.1384 88.0057 88 87.0221 88 85.9999H80C80 87.7481 80.2371 89.4473 80.6834 91.0642L88.3951 88.9357ZM84.5392 93.9999L113.461 93.9999L113.461 85.9999L84.5392 85.9999L84.5392 93.9999ZM110 85.9999C110 87.0221 109.862 88.0057 109.605 88.9357L117.317 91.0642C117.763 89.4473 118 87.7481 118 85.9999H110ZM99 74.9999C105.075 74.9999 110 79.9248 110 85.9999H118C118 75.5065 109.493 66.9999 99 66.9999V74.9999Z" mask="url(#path-9-inside-2)" />
            </g>
          </g>
          <g class="face-looking">
            <circle cx="138" cy="116" r="5" fill="white" />
            <path fill="white" fill-rule="evenodd" d="M174 97C182.284 97 189 90.2843 189 82C189 73.7157 182.284 67 174 67C165.716 67 159 73.7157 159 82C159 90.2843 165.716 97 174 97ZM174 96C178.418 96 182 92.4183 182 88C182 83.5817 178.418 80 174 80C169.582 80 166 83.5817 166 88C166 92.4183 169.582 96 174 96Z" clip-rule="evenodd" />
            <path fill="white" fill-rule="evenodd" d="M99 98C107.284 98 114 91.2843 114 83C114 74.7157 107.284 68 99 68C90.7157 68 84 74.7157 84 83C84 91.2843 90.7157 98 99 98ZM99 97C103.418 97 107 93.4183 107 89C107 84.5817 103.418 81 99 81C94.5817 81 91 84.5817 91 89C91 93.4183 94.5817 97 99 97Z" clip-rule="evenodd" /> </g>
        </g>
        <mask id="mask3" width="274" height="205" x="0" y="0" mask-type="alpha" maskUnits="userSpaceOnUse">
          <rect width="274" height="205" fill="#C4C4C4" rx="10" />
        </mask>
        <g mask="url(#mask3)">
          <rect width="102" height="36" x="-2" y="171" stroke="white" stroke-width="8" rx="6" />
        </g>
      </g>
      <defs>
        <clipPath id="clip0">
          <rect width="274" height="231" fill="white" />
        </clipPath>
      </defs>
    </svg>
    <div v-for="(ingredient, key) in ingredients" :key="key">
      <div class="ingredient">{{ingredient}}</div>
      <button @click="remove(ingredient)">-</button>
    </div>
    <div><input type="text" v-model="newIngredient" :placeholder="this.ingredientsAdded ? '' : 'tomatoes' " @keyup.enter="add" @focus="() => {this.editing = true}" @focusout="() => {this.editing = false}">
      <button @click="add">+</button>
    </div>
  </div>
</template>

<script>
import Ingredient from './Ingredient.vue';

export default {
  name: 'Fridge',
  components: {
    Ingredient
  },
  props: {
    ingredients: Array
  },
  data: function() {
    return {
      newIngredient: '',
      ingredientsAdded: false,
      editing: false
    }
  },
  methods: {
    add: function() {
      if(this.newIngredient.length) {
        this.$emit('addIngredient', this.newIngredient);
        this.newIngredient = '';
      }

      if(!this.ingredientsAdded) {
        this.ingredientsAdded = true;
      }
    },
    remove: function(ingredientToRemove) {
      this.$emit('removeIngredient', ingredientToRemove);
    }
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
.ingredient {
  display: inline;
}

.face-looking {
  display: none;
}

.looking .face-smiling {
  display: none;
}

.looking .face-looking {
  display: block;
}
</style>
